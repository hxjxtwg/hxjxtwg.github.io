<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>简单封装网页app | 我的博客</title>
<meta name="keywords" content="技术">
<meta name="description" content="只要做一个“空壳” APP，它唯一的目的就是打开您在网址（server.url），然后适应手机的手势。">
<meta name="author" content="xxsky">
<link rel="canonical" href="//localhost:1313/posts/%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85%E7%BD%91%E9%A1%B5app/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/posts/%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85%E7%BD%91%E9%A1%B5app/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="我的博客 (Alt + H)">我的博客</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      简单封装网页app
    </h1>
    <div class="post-meta"><span title='2025-12-03 21:02:53 +0800 CST'>December 3, 2025</span>&nbsp;·&nbsp;<span>xxsky</span>

</div>
  </header> 
  <div class="post-content"><p>只要做一个“空壳” APP，它唯一的目的就是打开您在网址（server.url），然后适应手机的手势。</p>
<h2 id="步骤一">步骤一<a hidden class="anchor" aria-hidden="true" href="#步骤一">#</a></h2>
<h3 id="1打开-cmd-命令行进入这个新的空的文件夹">1.打开 cmd 命令行，进入这个新的、空的文件夹：<a hidden class="anchor" aria-hidden="true" href="#1打开-cmd-命令行进入这个新的空的文件夹">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">##新建文件夹</span>
</span></span><span style="display:flex;"><span>mkdir d:<span style="color:#ae81ff">\T</span>ools<span style="color:#ae81ff">\d</span>av
</span></span><span style="display:flex;"><span><span style="color:#75715e">##进入文件夹目录</span>
</span></span><span style="display:flex;"><span>d:
</span></span><span style="display:flex;"><span>cd D:<span style="color:#ae81ff">\T</span>ools<span style="color:#ae81ff">\d</span>av
</span></span></code></pre></div><h3 id="2-安装打包工具">2. 安装“打包工具”：<a hidden class="anchor" aria-hidden="true" href="#2-安装打包工具">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install @capacitor/core @capacitor/android @capacitor/cli
</span></span></code></pre></div><h3 id="3-初始化-capacitor">3. 初始化 Capacitor：<a hidden class="anchor" aria-hidden="true" href="#3-初始化-capacitor">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx cap init
</span></span></code></pre></div><ul>
<li>
<p>App Name? -&gt; 我的导航 (您自己起名)</p>
</li>
<li>
<p>App ID? -&gt; com.myname.nav (您自己起ID)</p>
</li>
<li>
<p>web asset directory? -&gt; public</p>
</li>
</ul>
<p>###4. 创建“欺骗”用的文件夹和文件：</p>
<ul>
<li>
<p>（npx cap init 不会创建 public 文件夹，我们必须手动创建）</p>
</li>
<li>
<p>在 cmd 中运行：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir public
</span></span></code></pre></div><ul>
<li>
<p>（public 文件夹里必须有一个 index.html）</p>
</li>
<li>
<p>在 cmd 中运行：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;&lt;html&gt;&lt;/html&gt;&#34;</span> &gt; public/index.html
</span></span></code></pre></div><ul>
<li>
<p>修改配置文件：</p>
<ul>
<li>
<p>用记事本打开 D:\Tools\Nav\capacitor.config.json。</p>
</li>
<li>
<p>确保它看起来是这样的（webDir: &lsquo;public&rsquo; 并且有 server.url）：</p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;appId&#34;</span>: <span style="color:#e6db74">&#34;com.myname.nav&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;appName&#34;</span>: <span style="color:#e6db74">&#34;我的导航&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;webDir&#34;</span>: <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;server&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;https://[您的导航站网址]&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="5-添加-android-平台">5. 添加 Android 平台：<a hidden class="anchor" aria-hidden="true" href="#5-添加-android-平台">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx cap add android
</span></span></code></pre></div><h3 id="6-同步配置">6. 同步配置：<a hidden class="anchor" aria-hidden="true" href="#6-同步配置">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx cap sync android
</span></span></code></pre></div><h2 id="步骤二">步骤二<a hidden class="anchor" aria-hidden="true" href="#步骤二">#</a></h2>
<h3 id="1-注入链接修复代码">1. 注入“链接”修复代码<a hidden class="anchor" aria-hidden="true" href="#1-注入链接修复代码">#</a></h3>
<ul>
<li>
<p>打开 Android Studio</p>
</li>
<li>
<p>打开您的新项目：D:\Tools\MyNavApp\android。</p>
</li>
<li>
<p>等待 Gradle 同步（这会很慢，因为它是一个新项目，需要下载“零件”）。</p>
</li>
<li>
<p>【关键】 找到您的 MainActivity.java：</p>
</li>
<li>
<p>app -&gt; java -&gt; com.myname.nav (您在步骤1里起的新ID) -&gt; MainActivity.java</p>
</li>
<li>
<p>双击打开它。</p>
</li>
<li>
<p>删除里面的所有内容。</p>
</li>
<li>
<p>粘贴这个新的、专门为“导航站”准备的“魔法代码”：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// 【【【【【 这是您在 init 时的 ID 】】】】】
</span></span><span style="display:flex;"><span>package com.xxsky.nav; 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import android.os.Bundle;
</span></span><span style="display:flex;"><span>import android.webkit.WebSettings;
</span></span><span style="display:flex;"><span>import android.webkit.WebView;
</span></span><span style="display:flex;"><span>import android.webkit.WebViewClient;
</span></span><span style="display:flex;"><span>import com.getcapacitor.BridgeActivity;
</span></span><span style="display:flex;"><span>// <span style="color:#f92672">(</span>注意：我们不再需要 <span style="color:#e6db74">&#34;OnBackPressedCallback&#34;</span> 了<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>public class MainActivity extends BridgeActivity <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // 我们需要把 webView 变量放在这里，以便“返回键”能“看到”它
</span></span><span style="display:flex;"><span>    private WebView webView; 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public void onCreate<span style="color:#f92672">(</span>Bundle savedInstanceState<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        super.onCreate<span style="color:#f92672">(</span>savedInstanceState<span style="color:#f92672">)</span>; 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        // 1. 【链接修复】<span style="color:#f92672">(</span>和之前一样<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        //    我们把 webView 存到“全局”变量里
</span></span><span style="display:flex;"><span>        this.webView <span style="color:#f92672">=</span> this.bridge.getWebView<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        WebSettings webSettings <span style="color:#f92672">=</span> this.webView.getSettings<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        webSettings.setJavaScriptCanOpenWindowsAutomatically<span style="color:#f92672">(</span>true<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        this.webView.setWebViewClient<span style="color:#f92672">(</span>new WebViewClient<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            @Override
</span></span><span style="display:flex;"><span>            public boolean shouldOverrideUrlLoading<span style="color:#f92672">(</span>WebView view, String url<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                view.loadUrl<span style="color:#f92672">(</span>url<span style="color:#f92672">)</span>; 
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // --- 2. 【【【这就是“返回键”的“终极修复”（安全版）】】】 ---
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // 我们“覆盖”那个“旧的、可靠的” onBackPressed 函数
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public void onBackPressed<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        // a. 当用户按下“返回”...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        // b. ...我们检查“浏览器”是否可以后退
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>this.webView.canGoBack<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            // c. ...如果可以，我们就在“浏览器”里后退
</span></span><span style="display:flex;"><span>            this.webView.goBack<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            // d. ...如果不能<span style="color:#f92672">(</span>在主页<span style="color:#f92672">)</span>，我们就调用“系统默认”的返回 <span style="color:#f92672">(</span>也就是“退出APP”<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>            super.onBackPressed<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>或者有沉浸式功能的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// 【【【 关键：这是您的 ID ！】】】
</span></span><span style="display:flex;"><span>package com.navgo.hxjx;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import android.graphics.Color; // &lt;-- 【新】导入“颜色”
</span></span><span style="display:flex;"><span>import android.os.Bundle;
</span></span><span style="display:flex;"><span>import android.view.View; // &lt;-- 【新】导入“View”
</span></span><span style="display:flex;"><span>import android.webkit.WebSettings;
</span></span><span style="display:flex;"><span>import android.webkit.WebView;
</span></span><span style="display:flex;"><span>import android.webkit.WebViewClient;
</span></span><span style="display:flex;"><span>import com.getcapacitor.BridgeActivity;
</span></span><span style="display:flex;"><span>import com.getcapacitor.WebViewListener; // 导入“安全”工具
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>public class MainActivity extends BridgeActivity <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // 我们需要把 webView 变量放在这里，以便“返回键”能“看到”它
</span></span><span style="display:flex;"><span>    private WebView webView;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public void onCreate<span style="color:#f92672">(</span>Bundle savedInstanceState<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        super.onCreate<span style="color:#f92672">(</span>savedInstanceState<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        // --- 【【【这就是“沉浸式”的“终极修复”】】】 ---
</span></span><span style="display:flex;"><span>        // 这会“强行”让窗口画在状态栏下面 <span style="color:#f92672">(</span>导致“重叠”<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        // 并且把状态栏设为“透明”
</span></span><span style="display:flex;"><span>        getWindow<span style="color:#f92672">()</span>.getDecorView<span style="color:#f92672">()</span>.setSystemUiVisibility<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>                View.SYSTEM_UI_FLAG_LAYOUT_STABLE |
</span></span><span style="display:flex;"><span>                        View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>        getWindow<span style="color:#f92672">()</span>.setStatusBarColor<span style="color:#f92672">(</span>Color.TRANSPARENT<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>        //
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        // 1. 【链接修复】<span style="color:#f92672">(</span>和之前一样<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        //    我们把 webView 存到“全局”变量里
</span></span><span style="display:flex;"><span>        this.webView <span style="color:#f92672">=</span> this.bridge.getWebView<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        WebSettings webSettings <span style="color:#f92672">=</span> this.webView.getSettings<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        webSettings.setJavaScriptCanOpenWindowsAutomatically<span style="color:#f92672">(</span>true<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        this.webView.setWebViewClient<span style="color:#f92672">(</span>new WebViewClient<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            @Override
</span></span><span style="display:flex;"><span>            public boolean shouldOverrideUrlLoading<span style="color:#f92672">(</span>WebView view, String url<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                view.loadUrl<span style="color:#f92672">(</span>url<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // --- 2. 【【【这就是“返回键”的“终极修复”（安全版）】】】 ---
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // 我们“覆盖”那个“旧的、可靠的” onBackPressed 函数
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public void onBackPressed<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        // a. 当用户按下“返回”...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        // b. ...我们检查“浏览器”是否可以后退
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>this.webView.canGoBack<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            // c. ...如果可以，我们就在“浏览器”里后退
</span></span><span style="display:flex;"><span>            this.webView.goBack<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            // d. ...如果不能<span style="color:#f92672">(</span>在主页<span style="color:#f92672">)</span>，我们就调用“系统默认”的返回 <span style="color:#f92672">(</span>也就是“退出APP”<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>            super.onBackPressed<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h2 id="步骤三">步骤三<a hidden class="anchor" aria-hidden="true" href="#步骤三">#</a></h2>
<p>更改 APP 图标</p>
<h3 id="1准备您的图标文件">1：准备您的图标文件<a hidden class="anchor" aria-hidden="true" href="#1准备您的图标文件">#</a></h3>
<p>您需要一张正方形的图片。</p>
<ul>
<li>
<p>格式： 最好是 .png 格式（支持透明背景）。</p>
</li>
<li>
<p>尺寸： 尺寸越大越好，Android Studio 会自动帮您缩放。理想尺寸是 1024x1024 像素（512x512 也可以）。</p>
</li>
<li>
<p>注意： 现代安卓图标有“安全区域”（通常是中间 66% 的圆形或圆角矩形）。请确保您的“核心”Logo 在这个安全区域内，否则它可能会被裁切。</p>
</li>
<li>
<p>准备好这张 .png 文件，并把它放在您电脑上一个容易找到的位置（比如“桌面”）。</p>
</li>
</ul>
<h3 id="2使用-android-studio-的asset-studio工具">2：使用 Android Studio 的“Asset Studio”工具<a hidden class="anchor" aria-hidden="true" href="#2使用-android-studio-的asset-studio工具">#</a></h3>
<ul>
<li>
<p>请回到您的 Android Studio（确保 D:\Tools\LunaTV\android 项目是打开的）。</p>
</li>
<li>
<p>在左上角的**“项目”文件浏览器**中（您之前找 MainActivity.java 的地方）。</p>
</li>
<li>
<p>右键点击最顶层的那个 app 文件夹（它有一个蓝色的“a”图标）。</p>
</li>
<li>
<p>在弹出的菜单中，移动到 &ldquo;New&rdquo; (新建) -&gt; &ldquo;Image Asset&rdquo; (图像资产)。</p>
</li>
</ul>
<h3 id="3-配置您的新图标">3. 配置您的新图标<a hidden class="anchor" aria-hidden="true" href="#3-配置您的新图标">#</a></h3>
<ul>
<li>
<p>点击后，会弹出一个叫 &ldquo;Asset Studio&rdquo; 的新窗口。</p>
</li>
<li>
<p>Icon Type (图标类型)： 保持默认的 Launcher Icons (Adaptive &amp; Legacy)。</p>
</li>
<li>
<p>Name (名称)： 保持默认的 ic_launcher。</p>
</li>
<li>
<p>Source Asset (源资产)：</p>
</li>
<li>
<p>在 Path (路径) 这一行，点击它最右边的**“文件夹”图标**。</p>
</li>
<li>
<p>在弹出的文件选择器中，找到并选择您在步骤 1 中准备好的那张 .png 图标文件。</p>
</li>
<li>
<p>点击 OK。</p>
</li>
<li>
<p>调整 (Scaling)：</p>
</li>
<li>
<p>您会立刻在右侧的“预览”窗口看到您的图标。</p>
</li>
<li>
<p>您可能会看到一个“安全区”的圆圈。</p>
</li>
<li>
<p>在中间的 Resize (调整大小) 滑块上，您可以左右拖动，把您的图标缩放到您觉得合适的大小（通常是让它刚好填满那个“安全区”）。</p>
</li>
<li>
<p>（可选）Background Layer (背景层)：</p>
</li>
<li>
<p>如果您的 .png 是透明的，您可以在这里给它加一个纯色背景。</p>
</li>
<li>
<p>在 Name: ic_launcher 的下方，您会看到三个标签页 (Tab)：</p>
<ul>
<li>
<p>Foreground Layer (前景层) &lt;&ndash; 您现在在这里！（它是蓝色的）</p>
</li>
<li>
<p>Background Layer (背景层) &lt;&ndash; 您要点击这里！</p>
</li>
<li>
<p>Options (选项)</p>
</li>
</ul>
</li>
<li>
<p>点击一下第二个标签页，也就是 Background Layer (背景层)</p>
<ul>
<li>Source Asset -&gt; Asset Type -&gt; Color (颜色)，</li>
<li>然后选择您想要的背景色。</li>
</ul>
</li>
</ul>
<h3 id="4-生成图标">4. 生成图标<a hidden class="anchor" aria-hidden="true" href="#4-生成图标">#</a></h3>
<ul>
<li>
<p>当您对预览满意后，点击右下角的 &ldquo;Next&rdquo; (下一步) 按钮。</p>
</li>
<li>
<p>它会弹出一个新窗口，显示它将要**“覆盖”**（Overwrite）一大堆旧的 ic_launcher.png 文件。</p>
</li>
<li>
<p>这是正常的，这正是我们想要的。</p>
</li>
<li>
<p>点击右下角的 &ldquo;Finish&rdquo; (完成) 按钮。</p>
</li>
</ul>
<p>Android Studio 现在会自动生成所有不同尺寸（mdpi, hdpi, xhdpi 等）的图标，并替换掉项目里默认的那个 Capacitor 图标。</p>
<h2 id="步骤四">步骤四：<a hidden class="anchor" aria-hidden="true" href="#步骤四">#</a></h2>
<p>启动logo图标</p>
<h3 id="1-准备您的新图片">1. 准备您的新图片<a hidden class="anchor" aria-hidden="true" href="#1-准备您的新图片">#</a></h3>
<ul>
<li>
<p>请您准备好您自己的“启动页面”图片（例如，您桌面上有一个 logo.png）。</p>
</li>
<li>
<p>重要：您不需要准备11个版本。您只需要一张高分辨率的 .png 文件。</p>
</li>
<li>
<p>尺寸如：215*215，底色透明。</p>
</li>
</ul>
<h3 id="2-添加logopng">2. 添加logo.png<a hidden class="anchor" aria-hidden="true" href="#2-添加logopng">#</a></h3>
<ul>
<li>
<p>请您再次找到并打开那个文件： app -&gt; res -&gt; drawable -&gt; splash_layout.xml</p>
</li>
<li>
<p>回到 Android Studio。</p>
</li>
<li>
<p>在左侧文件树中，找到 res/drawable 文件夹。</p>
</li>
<li>
<p>右键点击 drawable 文件夹-&gt;open in-&gt;Explorer&quot; (在资源管理器中显示)。</p>
</li>
<li>
<p>Windows 文件夹会打开 drawable 文件夹。</p>
</li>
<li>
<p>把logo.png 复制到这个文件夹里。 (我们不再需要 drawable-hdpi那些文件夹了)</p>
</li>
</ul>
<p>###3. 创建“智能”布局文件 (splash_layout.xml)</p>
<ul>
<li>
<p>回到 Android Studio。</p>
</li>
<li>
<p>右键点击 res/drawable 文件夹。</p>
</li>
<li>
<p>选择 &ldquo;New&rdquo; (新建) -&gt; &ldquo;Drawable Resource File&rdquo; (Drawable 资源文件)。</p>
</li>
<li>
<p>File name (文件名): 请输入 splash_layout</p>
</li>
<li>
<p>Root element (根元素): 请输入 layer-list</p>
</li>
<li>
<p>点击 OK。</p>
</li>
<li>
<p>一个新的 splash_layout.xml 文件会生成。</p>
</li>
<li>
<p>在资源管理器中记事本打开，然后替换粘贴以下全部代码：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;layer-list</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">android:color=</span><span style="color:#e6db74">&#34;?android:attr/colorBackground&#34;</span> <span style="color:#f92672">/&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;item</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:width=</span><span style="color:#e6db74">&#34;200dp&#34;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:height=</span><span style="color:#e6db74">&#34;200dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:drawable=</span><span style="color:#e6db74">&#34;@drawable/logo&#34;</span>  
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/layer-list&gt;</span>
</span></span></code></pre></div><p>*（重要！） 在粘贴后，请务必修改 android:drawable=&quot;@drawable/logo&quot; 这一行，把 logo 改成您自己的文件名（不带 .png）。</p>
<ul>
<li>保存并关闭 splash_layout.xml。</li>
</ul>
<h3 id="4-告诉-app-使用新的启动页">4. 告诉 APP 使用“新”的启动页<a hidden class="anchor" aria-hidden="true" href="#4-告诉-app-使用新的启动页">#</a></h3>
<ul>
<li>
<p>打开 res/values/styles.xml 文件。</p>
</li>
<li>
<p>找到 AppTheme.NoActionBarLaunch 这一段，整个<code>&lt;style&gt;</code>替换修改成</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;AppTheme.NoActionBarLaunch&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;AppTheme.NoActionBar&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:windowBackground&#34;</span><span style="color:#f92672">&gt;</span>@drawable/splash_layout<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;windowActionBar&#34;</span><span style="color:#f92672">&gt;</span>false<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;windowNoTitle&#34;</span><span style="color:#f92672">&gt;</span>true<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span></code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>   <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;AppTheme.NoActionBarLaunch&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.AppCompat.Light.NoActionBar&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:windowBackground&#34;</span><span style="color:#f92672">&gt;</span>@drawable/splash_layout<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;windowActionBar&#34;</span><span style="color:#f92672">&gt;</span>false<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;windowNoTitle&#34;</span><span style="color:#f92672">&gt;</span>true<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&lt;/style&gt;</span>
</span></span></code></pre></div><ul>
<li>
<p>保存并关闭 styles.xml。</p>
</li>
<li>
<p>（可选，但推荐） 为了省空间，您可以删除掉那 11 张旧的 splash.png 文件了（在 drawable 文件夹下的 splash (11) 组上点右键 -&gt; &ldquo;Delete&rdquo;）。</p>
</li>
</ul>
<h2 id="步骤五">步骤五：<a hidden class="anchor" aria-hidden="true" href="#步骤五">#</a></h2>
<p>打包生成最终的 APK</p>
<h3 id="1-在-android-studio-中点击顶部菜单栏的-build-构建">1. 在 Android Studio 中，点击顶部菜单栏的 &ldquo;Build&rdquo; (构建)。<a hidden class="anchor" aria-hidden="true" href="#1-在-android-studio-中点击顶部菜单栏的-build-构建">#</a></h3>
<h3 id="2-选择-generate-app-bundles-or-apks-生成">2. 选择 &ldquo;Generate App Bundles or APKs&rdquo; (生成&hellip;)。<a hidden class="anchor" aria-hidden="true" href="#2-选择-generate-app-bundles-or-apks-生成">#</a></h3>
<h3 id="3-在子菜单中选择-generate-apks-生成-apks">3. 在子菜单中，选择 &ldquo;Generate APKs&rdquo; (生成 APKs)。<a hidden class="anchor" aria-hidden="true" href="#3-在子菜单中选择-generate-apks-生成-apks">#</a></h3>
<h3 id="4-等待构建完成build-successful">4. 等待构建完成（BUILD SUCCESSFUL）。<a hidden class="anchor" aria-hidden="true" href="#4-等待构建完成build-successful">#</a></h3>
<h3 id="5-在右下角弹出的通知中点击-locate-定位">5. 在右下角弹出的通知中，点击 &ldquo;Locate&rdquo; (定位)。<a hidden class="anchor" aria-hidden="true" href="#5-在右下角弹出的通知中点击-locate-定位">#</a></h3>
<h3 id="6-最终成品-您会得到-app-debugapk-文件它现在是布局完美且功能完美的">6. 最终成品： 您会得到 app-debug.apk 文件，它现在是“布局完美”且“功能完美”的。<a hidden class="anchor" aria-hidden="true" href="#6-最终成品-您会得到-app-debugapk-文件它现在是布局完美且功能完美的">#</a></h3>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/%E6%8A%80%E6%9C%AF/">技术</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="//localhost:1313/">我的博客</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
